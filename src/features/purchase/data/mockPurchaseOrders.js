import {
  PO_STATUS,
  PAYMENT_STATUS,
  DISCOUNT_TYPE,
} from '../types/purchaseOrder.types.js';

/**
 * Mock purchase order data for development and testing
 */
export const MOCK_PURCHASE_ORDERS = [
  {
    id: 'PO-001',
    orderNumber: 'PO-2025-001',
    supplierId: 'SUP-001',
    supplierName: 'Yoga Essentials Inc.',
    orderDate: new Date('2025-11-01'),
    expectedDeliveryDate: new Date('2025-11-08'),
    actualDeliveryDate: new Date('2025-11-07'),
    status: PO_STATUS.COMPLETED,
    branchId: 'BRANCH-001',
    branchName: 'Main Branch',
    items: [
      {
        id: 'POI-001-1',
        productId: 'PROD-001',
        productName: 'Premium Yoga Mat',
        sku: 'YM-001',
        unit: 'piece',
        orderedQuantity: 50,
        receivedQuantity: 50,
        pendingQuantity: 0,
        unitPrice: 45.00,
        discount: 10,
        discountType: DISCOUNT_TYPE.PERCENTAGE,
        tax: 202.50,
        taxRate: 10,
        totalAmount: 2227.50,
      },
      {
        id: 'POI-001-2',
        productId: 'PROD-002',
        productName: 'Yoga Block Set',
        sku: 'YB-001',
        unit: 'set',
        orderedQuantity: 30,
        receivedQuantity: 30,
        pendingQuantity: 0,
        unitPrice: 25.00,
        discount: 50,
        discountType: DISCOUNT_TYPE.FIXED,
        tax: 72.50,
        taxRate: 10,
        totalAmount: 797.50,
      },
    ],
    subtotal: 2700.00,
    totalDiscount: 510.00,
    totalTax: 275.00,
    shippingCost: 100.00,
    otherCharges: 50.00,
    totalAmount: 3025.00,
    paymentTerms: 'Net 30 Days',
    paymentStatus: PAYMENT_STATUS.PAID,
    paidAmount: 3025.00,
    notes: 'Urgent order for new studio opening',
    internalNotes: 'Negotiate better pricing next time',
    receivings: [
      {
        id: 'GRN-001',
        receivingNumber: 'GRN-2025-001',
        receivedDate: new Date('2025-11-07'),
        receivedBy: 'John Doe',
        items: [
          {
            id: 'POI-001-1',
            productId: 'PROD-001',
            productName: 'Premium Yoga Mat',
            sku: 'YM-001',
            unit: 'piece',
            orderedQuantity: 50,
            receivedQuantity: 50,
            pendingQuantity: 0,
            unitPrice: 45.00,
            discount: 10,
            discountType: DISCOUNT_TYPE.PERCENTAGE,
            tax: 202.50,
            taxRate: 10,
            totalAmount: 2227.50,
          },
          {
            id: 'POI-001-2',
            productId: 'PROD-002',
            productName: 'Yoga Block Set',
            sku: 'YB-001',
            unit: 'set',
            orderedQuantity: 30,
            receivedQuantity: 30,
            pendingQuantity: 0,
            unitPrice: 25.00,
            discount: 50,
            discountType: DISCOUNT_TYPE.FIXED,
            tax: 72.50,
            taxRate: 10,
            totalAmount: 797.50,
          },
        ],
        notes: 'All items received in good condition',
        status: 'complete',
        attachments: [],
      },
    ],
    returns: [],
    attachments: [],
    createdBy: 'admin',
    approvedBy: 'manager',
    createdAt: new Date('2025-11-01'),
    updatedAt: new Date('2025-11-07'),
  },
  {
    id: 'PO-002',
    orderNumber: 'PO-2025-002',
    supplierId: 'SUP-002',
    supplierName: 'Mindful Wellness Distributors',
    orderDate: new Date('2025-11-03'),
    expectedDeliveryDate: new Date('2025-11-13'),
    actualDeliveryDate: new Date('2025-11-12'),
    status: PO_STATUS.PARTIAL,
    branchId: 'BRANCH-001',
    branchName: 'Main Branch',
    items: [
      {
        id: 'POI-002-1',
        productId: 'PROD-003',
        productName: 'Yoga Pants - Large',
        sku: 'YP-L-001',
        unit: 'piece',
        orderedQuantity: 100,
        receivedQuantity: 75,
        pendingQuantity: 25,
        unitPrice: 35.00,
        discount: 5,
        discountType: DISCOUNT_TYPE.PERCENTAGE,
        tax: 332.50,
        taxRate: 10,
        totalAmount: 3657.50,
      },
      {
        id: 'POI-002-2',
        productId: 'PROD-004',
        productName: 'Yoga Strap',
        sku: 'YS-001',
        unit: 'piece',
        orderedQuantity: 60,
        receivedQuantity: 60,
        pendingQuantity: 0,
        unitPrice: 15.00,
        discount: 0,
        discountType: DISCOUNT_TYPE.FIXED,
        tax: 90.00,
        taxRate: 10,
        totalAmount: 990.00,
      },
    ],
    subtotal: 4400.00,
    totalDiscount: 175.00,
    totalTax: 422.50,
    shippingCost: 75.00,
    otherCharges: 25.00,
    totalAmount: 4647.50,
    paymentTerms: 'Net 60 Days',
    paymentStatus: PAYMENT_STATUS.UNPAID,
    paidAmount: 0,
    notes: 'Please use eco-friendly packaging',
    internalNotes: 'Partial delivery expected due to supplier stock issues',
    receivings: [
      {
        id: 'GRN-002',
        receivingNumber: 'GRN-2025-002',
        receivedDate: new Date('2025-11-12'),
        receivedBy: 'Jane Smith',
        items: [
          {
            id: 'POI-002-1',
            productId: 'PROD-003',
            productName: 'Yoga Pants - Large',
            sku: 'YP-L-001',
            unit: 'piece',
            orderedQuantity: 100,
            receivedQuantity: 75,
            pendingQuantity: 25,
            unitPrice: 35.00,
            discount: 5,
            discountType: DISCOUNT_TYPE.PERCENTAGE,
            tax: 249.38,
            taxRate: 10,
            totalAmount: 2743.13,
          },
          {
            id: 'POI-002-2',
            productId: 'PROD-004',
            productName: 'Yoga Strap',
            sku: 'YS-001',
            unit: 'piece',
            orderedQuantity: 60,
            receivedQuantity: 60,
            pendingQuantity: 0,
            unitPrice: 15.00,
            discount: 0,
            discountType: DISCOUNT_TYPE.FIXED,
            tax: 90.00,
            taxRate: 10,
            totalAmount: 990.00,
          },
        ],
        notes: 'Partial delivery - 25 yoga pants still pending',
        status: 'partial',
        attachments: [],
      },
    ],
    returns: [],
    attachments: [],
    createdBy: 'admin',
    approvedBy: 'manager',
    createdAt: new Date('2025-11-03'),
    updatedAt: new Date('2025-11-12'),
  },
  {
    id: 'PO-003',
    orderNumber: 'PO-2025-003',
    supplierId: 'SUP-003',
    supplierName: 'Eco Yoga Supplies',
    orderDate: new Date('2025-11-05'),
    expectedDeliveryDate: new Date('2025-11-15'),
    actualDeliveryDate: null,
    status: PO_STATUS.ORDERED,
    branchId: 'BRANCH-001',
    branchName: 'Main Branch',
    items: [
      {
        id: 'POI-003-1',
        productId: 'PROD-005',
        productName: 'Eco-Friendly Yoga Mat',
        sku: 'EM-001',
        unit: 'piece',
        orderedQuantity: 40,
        receivedQuantity: 0,
        pendingQuantity: 40,
        unitPrice: 55.00,
        discount: 15,
        discountType: DISCOUNT_TYPE.PERCENTAGE,
        tax: 187.00,
        taxRate: 10,
        totalAmount: 2057.00,
      },
    ],
    subtotal: 2200.00,
    totalDiscount: 330.00,
    totalTax: 187.00,
    shippingCost: 50.00,
    otherCharges: 0,
    totalAmount: 2107.00,
    paymentTerms: 'Net 30 Days',
    paymentStatus: PAYMENT_STATUS.UNPAID,
    paidAmount: 0,
    notes: 'Eco-friendly packaging required',
    internalNotes: 'First order with this supplier - monitor quality',
    receivings: [],
    returns: [],
    attachments: [],
    createdBy: 'admin',
    approvedBy: 'manager',
    createdAt: new Date('2025-11-05'),
    updatedAt: new Date('2025-11-05'),
  },
  {
    id: 'PO-004',
    orderNumber: 'PO-2025-004',
    supplierId: 'SUP-004',
    supplierName: 'Global Fitness Wholesale',
    orderDate: new Date('2025-11-04'),
    expectedDeliveryDate: new Date('2025-11-12'),
    actualDeliveryDate: null,
    status: PO_STATUS.APPROVED,
    branchId: 'BRANCH-002',
    branchName: 'Downtown Branch',
    items: [
      {
        id: 'POI-004-1',
        productId: 'PROD-006',
        productName: 'Meditation Cushion',
        sku: 'MC-001',
        unit: 'piece',
        orderedQuantity: 25,
        receivedQuantity: 0,
        pendingQuantity: 25,
        unitPrice: 40.00,
        discount: 100,
        discountType: DISCOUNT_TYPE.FIXED,
        tax: 90.00,
        taxRate: 10,
        totalAmount: 990.00,
      },
      {
        id: 'POI-004-2',
        productId: 'PROD-007',
        productName: 'Yoga Bolster',
        sku: 'YBO-001',
        unit: 'piece',
        orderedQuantity: 20,
        receivedQuantity: 0,
        pendingQuantity: 20,
        unitPrice: 50.00,
        discount: 10,
        discountType: DISCOUNT_TYPE.PERCENTAGE,
        tax: 90.00,
        taxRate: 10,
        totalAmount: 990.00,
      },
    ],
    subtotal: 2000.00,
    totalDiscount: 200.00,
    totalTax: 180.00,
    shippingCost: 80.00,
    otherCharges: 40.00,
    totalAmount: 1980.00,
    paymentTerms: 'Net 15 Days',
    paymentStatus: PAYMENT_STATUS.UNPAID,
    paidAmount: 0,
    notes: 'Deliver to downtown branch warehouse',
    internalNotes: '',
    receivings: [],
    returns: [],
    attachments: [],
    createdBy: 'admin',
    approvedBy: 'manager',
    createdAt: new Date('2025-11-04'),
    updatedAt: new Date('2025-11-04'),
  },
  {
    id: 'PO-005',
    orderNumber: 'PO-2025-005',
    supplierId: 'SUP-001',
    supplierName: 'Yoga Essentials Inc.',
    orderDate: new Date('2025-11-06'),
    expectedDeliveryDate: new Date('2025-11-16'),
    actualDeliveryDate: null,
    status: PO_STATUS.DRAFT,
    branchId: 'BRANCH-001',
    branchName: 'Main Branch',
    items: [
      {
        id: 'POI-005-1',
        productId: 'PROD-001',
        productName: 'Premium Yoga Mat',
        sku: 'YM-001',
        unit: 'piece',
        orderedQuantity: 30,
        receivedQuantity: 0,
        pendingQuantity: 30,
        unitPrice: 45.00,
        discount: 10,
        discountType: DISCOUNT_TYPE.PERCENTAGE,
        tax: 121.50,
        taxRate: 10,
        totalAmount: 1336.50,
      },
    ],
    subtotal: 1350.00,
    totalDiscount: 135.00,
    totalTax: 121.50,
    shippingCost: 60.00,
    otherCharges: 0,
    totalAmount: 1396.50,
    paymentTerms: 'Net 30 Days',
    paymentStatus: PAYMENT_STATUS.UNPAID,
    paidAmount: 0,
    notes: '',
    internalNotes: 'Draft order - awaiting approval',
    receivings: [],
    returns: [],
    attachments: [],
    createdBy: 'admin',
    approvedBy: null,
    createdAt: new Date('2025-11-06'),
    updatedAt: new Date('2025-11-06'),
  },
];

/**
 * Generate a new unique purchase order ID
 */
export const generatePurchaseOrderId = () => {
  const maxId = MOCK_PURCHASE_ORDERS.reduce((max, po) => {
    const num = parseInt(po.id.split('-')[1]);
    return num > max ? num : max;
  }, 0);
  const newNum = (maxId + 1).toString().padStart(3, '0');
  return `PO-${newNum}`;
};

/**
 * Generate a new unique purchase order number
 */
export const generatePurchaseOrderNumber = () => {
  const year = new Date().getFullYear();
  const maxNum = MOCK_PURCHASE_ORDERS.reduce((max, po) => {
    const parts = po.orderNumber.split('-');
    if (parts[1] === year.toString()) {
      const num = parseInt(parts[2]);
      return num > max ? num : max;
    }
    return max;
  }, 0);
  const newNum = (maxNum + 1).toString().padStart(3, '0');
  return `PO-${year}-${newNum}`;
};
